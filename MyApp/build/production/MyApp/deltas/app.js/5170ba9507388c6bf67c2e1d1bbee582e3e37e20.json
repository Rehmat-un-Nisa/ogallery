["function _cd6b7f0ffd92193dec44e691fd430171c78e3a7e",50,56799,56887,122655,179784,4436,179542,242,184220,5369,195998,16723,192382,709,189598,2713,193089,444,"H",195901,46,"hbox\"",195874,124,193526,2367,212721,69099,284173,5047,"Img\",{extend:Ext.Component,xtype:[\"image\",\"img\"],config:{src",312464,33,"img\",imageCls:Ext.baseCSSPrefix+\"img-image\",backgroundCls:Ext.baseCSSPrefix+\"img-background\",mode:\"background\"}",270923,40,"a.onLoad=Ext.Function.bind(a.onLoad,a);a.onError=Ext.Function.bind(a.onError,a)",452224,52,"relayEvents(a.renderElement,\"*\");a.element.on({tap:\"onTap\",scope:a})},hide",313565,44,"hiddenSrc=this.hiddenSrc||this.getSrc();this.setSrc(null)",260796,45,"if(this.hiddenSrc){this.setSrc(this.hiddenSrc);delete this.hiddenSrc}},updateMode",256084,32,"mageCls(),b=c.getBackgroundCls();if(d===\"background\"){if(c.imageElement){c.imageElement.destroy();delete c.imageElement;c.updateSrc(c.getSrc())}c.replaceCls(a,b)}else{c.imageElement=c.element.createChild({tag:\"img\"});c.replaceCls(b,a)}},updateImageCls:function(b,a){this.replaceCls(a,b)},updateBackgroundCls:function(b,a){this.replaceCls(a,b)},",296607,34,"tap\",this,a)},onAfterRender:function(){this.updateSrc(this.getSrc())},updateSrc:function(a){var b=this,c;if(b.getMode()===\"background\"){c=this.imageObject||new Image()}else{c=b.imageElement.dom}this.imageObject=c;c.setAttribute(\"src\",Ext.isString(a)?a:\"\");c.addEventListener(\"load\",b.onLoad,false);c.addEventListener(\"error\",b.onError,false)},detachListeners:function(){var a=this.imageObject;if(a){a.removeEventListener(\"load\",this.onLoad,false);a.removeEventListener(\"error\",this.onError,false)}},onLoad:function(a){this.detachListeners();if(this.getMode()===\"background\"){this.element.dom.style.backgroundImage='url(\"'+this.imageObject.src+'\")'}this.fireEvent(\"load\",this,a)},onError:function(a){this.detachListeners();if(this.getMode()===\"background\"){this.element.dom.style.backgroundImage='url(\"'+this.imageObject.src+'\")'}this.fireEvent(\"error\",this,a)},doSetWidth:function(b){var a=(this.getMode()===\"background\")?this.element:this.imageElement;a.setWidth(b",479632,35,"Height:function(b){var a=(this.getMode()===\"background\")?this.element:this.imageElement;a.setHeight(b);this.callParent(",354462,36,"detachListeners();Ext.destroy(this.imageObject,this.imageElement);delete this.imageObject;delete this.imageElement",289182,39,"abel\",{extend:Ext.Component,xtype:\"label",270559,37,"label\"",289200,23208,313741,62177,377052,12518,389995,18269,"data.JsonP",245518,32,"JSONP\",singleton:true,requestCount:0,requests:{},timeout:30000",46293,47,"callbackKey:\"callback\",request:function(m){m=Ext.apply({},m);var i=this,d=Ext.isDefined(m.disableCaching)?m.disableCaching:i.disableCaching,g=m.disableCachingParam||i.disableCachingParam,c=++i.requestCount,k=m.callbackName||\"callback\"+c,h=m.callbackKey||i.callbackKey,l=Ext.isDefined(m.timeout)?m.timeout:i.timeout,e=Ext.apply({},m.params),b=m.url,a=Ext.isSandboxed?Ext.getUniqueGlobalNamespace():\"Ext\",f,j;e[h]=a+\".data.JsonP.\"+k;if(d){e[g]=new Date().getTime()}j=i.createScript(b,e,m);i.requests[c]=f={url:b,params:e,script:j,id:c,scope:m.scope,success:m.success,failure:m.failure,callback:m.callback,callbackKey:h,callbackName:k};if(l>0){f.timeout=setTimeout(Ext.bind(i.handleTimeout,i,[f]),l)}i.setupErrorHandling(f);i[k]=Ext.bind(i.handleResponse,i,[f],true);i.loadScript(f);return f},abort:function(b){var c=this.requests,a;if(b){if(!b.id){b=c[b]}this.handleAbort(b)}else{",122445,34,"){this.abort(c[a])}}}},setupErrorHandling:function(a){a.script.onerror=Ext.bind(this.handleError,this,[a])},handleAbort:function(a){a.errorType=\"abort\";this.handleResponse(null,a)},handleError:function(a){a.errorType=\"error\";this.handleResponse(null,a)},cleanupErrorHandling:function(a){a.script.onerror=null},handleTimeout:function(a){a.errorType=\"timeout\";this.handleResponse(null,a)},handleResponse:function(a,b){var c=true;if(b.timeout){clearTimeout(b.timeout)}delete this[b.callbackName];delete this.requests[b.id];this.cleanupErrorHandling(b);Ext.fly(b.script).destroy();if(b.errorType){c=false;Ext.callback(b.failure,b.scope,[b.errorType,b])}else{",276236,37,"}",276274,33,"c,a,b.errorType,b])},createScript:function(c,d,b){var a",48313,33,";a.setAttribute(\"src\",Ext.urlAppend(c,Ext.Object.toQueryString(d)));a.setAttribute(\"async\",true);a.setAttribute(\"type\",\"text/javascript\");return a},loadScript:function(a){Ext.getHead().appendChild(a.script",375892,1160,389570,421,"evice.communicator.Default\",{SERVER_URL:\"http://localhost:3000\",callbackDataMap:{},callbackIdMap:{},idSeed:0,globalScopeId:\"0\",generateId:function(){return String(++this.idSeed)},getId:function(a){var b=a.$callbackId;if(!b){a.$callbackId=b=this.generateId()}return b},getCallbackId:function(h,d){var c=this.callbackIdMap,b=this.callbackDataMap,g,a,f,e;if(!d){a=this.globalScopeId}else{if(d.isIdentifiable){a=d.getId()}else{a=this.getId(d)}}f=this.getId(h);if(!c[a]){c[a]={}}if(!c[a][f]){g=this.generateId();e={callback:h,scope:d};c[a][f]=g;b[g]=e}return c[a][f]},getCallbackData:function(a){return this.callbackDataMap[a]},invoke:function(c,a){var b=this.getCallbackData(c);b.callback.apply(b.scope,a)},send:function(c){var e,d,b,f;if(!c){c={}}else{if(c.callbacks){e=c.callbacks;d=c.scope;delete c.callbacks;delete c.scope;for(b in e){if(e.hasOwnProperty(b)){f=e[b];if(typeof f==\"function\"){c[b]=this.getCallbackId(f,d)}}}}}c.__source=document.location.href;var a=this.doSend(c);return(a&&a.length>0)?JSON.parse(a):null},doSend:function(a){var c=new XMLHttpRequest();c.open(\"GET\",this.SERVER_URL+\"?\"+Ext.Object.toQueryString(a)+\"&_dc=\"+new Date().getTime(),false);try{c.send(null);return c.responseText}catch(b){if(a.failure){this.invoke(a.failure)}else{if(a.callback){this.invoke(a.callback)}}}}});Ext.define(\"Ext.device.communicator.Android\",{extend:Ext.device.communicator.Default,doSend:function(a){return window.Sencha.action(JSON.stringify(a))}});Ext.define(\"Ext.device.Communicator\",{",123776,38,"if(Ext.os.is.Android){return new Ext.device.communicator.Android()}return new Ext.device.communicator.Default()}});Ext.define(\"Ext.device.camera.Abstract\",{source:{library:0,camera:1,album:2},destination:{data:0,file:1,\"native\":2},encoding:{jpeg:0,jpg:0,png:1},media:{picture:0,video:1,all:2},direction:{back:0,front:1},capture:Ext.emptyFn,getPicture:Ext.emptyFn,cleanup",354709,32,"evice.camera.Cordova\",{alternateClassName:\"Ext.device.camera.PhoneGap\",extend:Ext.device.camera.Abstract,getPicture:function(d,b,a){try{navigator.camera.getPicture(d,b,a)}catch(c){alert(c)}},cleanup:function(c,a){try{navigator.camera.cleanup(c,a)}catch(b){alert(b)}},capture:function(h){var f=h.success,d=h.failure,j=h.scope,b=this.source,e=this.destination,g=this.encoding,a=h.source,i=h.destination,c=h.encoding,k={};if(j){f=Ext.Function.bind(f,j);d=Ext.Function.bind(d,j)}if(a!==undefined){k.sourceType=b.hasOwnProperty(a)?b[a]:a}if(i!==undefined){k.destinationType=e.hasOwnProperty(i)?e[i]:i}if(c!==undefined){k.encodingType=g.hasOwnProperty(c)?g[c]:c}if(\"quality\" in h){k.quality=h.quality}if(\"width\" in h){k.targetWidth=h.width}if(\"height\" in h){k.targetHeight=h.height}this.getPicture(f,d,k)}});Ext.define(\"Ext.device.camera.Sencha\",{extend:Ext.device.camera.Abstract,capture:function(d){var c=this.source,b=this.destination,f=this.encoding,g=d.source,a=d.destination,e=d.encoding;if(c.hasOwnProperty(g)){g=c[g]}if(b.hasOwnProperty(a)){a=b[a]}if(f.hasOwnProperty(e)){e=f[e]}Ext.device.Communicator.send({command:\"Camera#capture\",callbacks:{success:d.success,failure:d.failure},scope:d.scope,quality:d.quality,width:d.width,height:d.height,source:g,destination:a,encoding:e})}});Ext.define(\"Ext.device.camera.Simulator\",{extend:Ext.device.camera.Abstract,config:{samples:[{success:\"http://www.sencha.com/img/sencha-large.png\"}]",318958,46,"updateSamples:function(a){this.sampleIndex=0},capture:function(d){var c=this.sampleIndex,b=this.getSamples(),g=b.length,f=b[c],e=d.scope,h=d.success,a=d.failure;if(\"success\" in f){if(h){h.call(e,f.success)}}else{if(a){a.call(e,f.failure)}}if(++c>g-1){c=0}this.sampleIndex=c}});Ext.define(\"Ext.device.Camera\",{",123776,44,"Ext.browser.is;if(a.WebView){if(a.Cordova){return Ext.create(\"Ext.device.camera.Cordova\")}else{if(a.Sencha){return Ext.create(\"Ext.device.camera.Sencha\")}}}return Ext.create(\"Ext.device.camera.Simulator\")",408244,88061,"tyleHtmlContent:true",496303,35,"id:\"login_form",496352,98,"id:\"login_email\",name:\"login_",496456,59,"id:\"login_password\",name:\"login_",496521,149,"var c=Ext.getCmp(\"login_email\").getValue();var a=Ext.getCmp(\"login_password\").getValue();Ext.Ajax.request({url:\"http://192.168.0.104/product_service/index.php/api/user/login\",method:\"POST\",disableCaching:false,useDefaultXhrHeader:false,params:{email:c,password:a},success:function(d){var f=Ext.decode(d.responseText);if(f.success){var e=MyApp.app;e.getController(\"Main\").view_MemberArea()}else{Ext.Msg.alert(\"Error\",f.error)}},failure:function(d,e){Ext.Msg.alert(\"Error\",\"Server-side failure. Is your internet working?\")}});if((c==\"admin\")&&(a==\"admin\")){var b=MyApp.app;b.getController(\"Main\").view_MemberArea()}",496670,41,"tyleHtmlContent:true",496709,107,"id:\"reg_email\",name:\"reg_",496456,59,"id:\"reg_password\",name:\"reg_",496521,149,"var b=Ext.getCmp(\"reg_email\").getValue();var a=Ext.getCmp(\"reg_password\").getValue();Ext.Ajax.request({url:\"http://192.168.0.104/product_service/index.php/api/user/register\",method:\"POST\",disableCaching:false,useDefaultXhrHeader:false,params:{email:b,password:a},success:function(c,d){var e=Ext.decode(c.responseText);if(e.success){Ext.Msg.alert(\"Success\",\"Your account is registered. Now proceed to login.\")}else{Ext.Msg.alert(\"Error\",e.error)}},failure:function(c,d){Ext.Msg.alert(\"Error\",\"Server-side failure. Is your internet working?\")}})}}]}]}});Ext.define(\"MyApp.view.Gallery\",{extend:Ext.Container,xtype:\"gallery\",config:{cls:\"gallery\",scrollable:true,showNavigation:true,floatingCloseBtn:true,tpl:Ext.create(\"Ext.XTemplate\",'<tpl if=\"this.isEmpty(items)\">','<div class=\"empty-text empty-gallery\">No image available</div>',\"</tpl>\",'<div class=\"gallery\" id=\"photos\">','<tpl for=\"items\">','<img src=\"{media.m:this.getThumbnail}\" class=\"thumbnail\" data-fullimage=\"{media.m:this.getFullImage}\"/>',\"</tpl>\",\"</div>\",{isEmpty:function(a){if(a.length===0){return true}return false},getThumbnail:function(a){return a.replace(\"_m\",\"_t\")},getFullImage:function(a){return a.replace(\"_m\",\"_n\")}})",452224,37,"loadImages();a.callParent(arguments)},loadImages:function(){var a=this;Ext.data.JsonP.request({url:\"http://api.flickr.com/services/feeds/photos_public.gne\",callbackKey:\"jsoncallback\",params:{format:\"json\"},success:function(b){a.add(b.items);a.setData(b)}})}});Ext.define(\"MyApp.view.Member",496199,32,"ember",496234,49,"Upload\",iconCls:\"home\",styleHtmlContent:true",496303,35,"id:\"product_upload_form\",layout:{type:\"vbox\",align:\"center\"}",496367,46,"Product Upload\",items:[{text:\"Logout\",align:\"right\",handler:function(){Ext.Ajax.request({url:\"http://192.168.0.104/product_service/index.php/api/user/logout\",method:\"POST\",disableCaching:false,useDefaultXhrHeader:false,success:function(a){var b=MyApp.app;b.getController(\"Main\").view_Login()}})}}]},{xtype:\"label\",html:\"First Step\"},{xtype:\"button\",id:\"product_photo\",text:\"Take Product Photo\",handler:function(a,b){Ext.device.Camera.capture({source:\"camera\",destination:\"file\",success:function(d){console.log(d);var e=Ext.getCmp(\"scan_barcode\");e.enable();var c=Ext.getCmp(\"product_photo\");c.disable()},failure:function(){Ext.Msg.alert(\"Error\",\"There was an error acquiring product picture.\")}})}},{xtype:\"label\",html:\"<br/>Second Step\"},{xtype:\"button\",id:\"scan_barcode\",text:\"Scan barcode\",disabled:true,handler:function(a,b){cordova.plugins.barcodeScanner.scan(function(c){Ext.Msg.alert(\"Success\",\"We got a barcode: \"+c.text);var d=Ext.getCmp(\"scan_barcode\");d.disable();var e=Ext.getCmp(\"upload_product\");e.enable()},function(c){Ext.Msg.alert(\"Error\",\"Scanning failed:\"+c)})}},{xtype:\"label\",html:\"<br/>Third Step\"},{xtype:\"button\",disabled:true,id:\"upload_product\",text:\"Upload Product\",handler:function(a,b){}}]},{title:\"View\",iconCls:\"action\",styleHtmlContent:true,scrollable:true,layout:\"fit",496366,47,"View Product(s)\",items:[{text:\"Logout\",align:\"right\",handler:function(){Ext.Ajax.request({url:\"http://192.168.0.104/product_service/index.php/api/user/logout\",method:\"POST\",disableCaching:false,useDefaultXhrHeader:false,success:function(a){var b=MyApp.app;b.getController(\"Main\").view_Login()}})}}]},{xtype:\"gallery\"}]}]}});Ext.define(\"MyApp.controller.Mai",320789,38,"refs:{member:{selector:\"member\",xtype:\"member\",autoCreate:true},login:{selector:\"main\",xtype:\"main\",autoCreate:true}}},view_MemberArea:function(){var a=this.getMember();var b=Ext.ComponentQuery.query(\"main\")[0];Ext.Viewport.remove(b);Ext.Viewport.add(a)},view_Login:function(){var b=this.getLogin();var a=Ext.ComponentQuery.query(\"member\")[0];Ext.Viewport.add(b);Ext.Viewport.remove(a)",497020,34,"controllers:[\"Main\"],views:[\"Main\",\"Gallery",497066,770]